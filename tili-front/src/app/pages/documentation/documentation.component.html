<div class="documentation-container">
  <div class="documentation-header">
    <h1>ูุฑูุฒ ุงููุซุงุฆู</h1>
    <p>ุงููุตูู ุฅูู ุฌููุน ูุซุงุฆูู ูู ููุงู ูุงุญุฏ</p>
    <button class="btn-primary" (click)="openCreateForm()">+ ูุซููุฉ ุฌุฏูุฏุฉ</button>
  </div>

  <div *ngIf="error" class="error-banner">
    {{ error }}
    <button type="button" (click)="error = null">ร</button>
  </div>

  <div *ngIf="loading" class="loading">ุฌุงุฑู ุชุญููู ุงููุซุงุฆูโฆ</div>

  <div *ngIf="!loading" class="filters">
    <div class="search-bar">
      <input type="text" [(ngModel)]="searchTerm" placeholder="ุงูุจุญุซ ุนู ูุซููุฉ...">
      <span class="search-icon">๐</span>
    </div>

    <div class="category-filters">
      <select [(ngModel)]="selectedCategory">
        <option *ngFor="let category of categories" [value]="category">
          {{ category }}
        </option>
      </select>
    </div>
  </div>

  <div *ngIf="!loading && documents.length === 0" class="empty-state">
    <p>ูุง ุชูุฌุฏ ูุซุงุฆู ุญุงููุงู.</p>
  </div>

  <div *ngIf="!loading && documents.length > 0" class="documents-table-container">
    <table class="documents-table">
      <thead>
        <tr>
          <th>ุงูุงุณู</th>
          <th>ุงูููุน</th>
          <th>ุงููุตู</th>
          <th>ุงูุชุงุฑูุฎ</th>
          <th>ุฅุฌุฑุงุกุงุช</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let doc of filteredDocuments">
          <td class="document-name">{{ doc.titre || 'โ' }}</td>
          <td>
            <span class="category-badge">{{ doc.type || 'โ' }}</span>
          </td>
          <td>{{ doc.description || 'โ' }}</td>
          <td>{{ formatDate(doc.dateCreation) }}</td>
          <td class="actions">
            <button class="btn-download" (click)="downloadDocument(doc)">ุชุญููู</button>
            <button class="btn-share" (click)="shareDocument(doc)">ูุดุงุฑูุฉ</button>
            <button class="btn-edit" (click)="openEditForm(doc)">ุชุนุฏูู</button>
            <button class="btn-danger" (click)="deleteDocument(doc)">ุญุฐู</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal ุฅูุดุงุก / ุชุนุฏูู ูุซููุฉ -->
  <div *ngIf="showForm" class="modal-overlay" (click)="closeForm()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h3>{{ editingDoc ? 'ุชุนุฏูู ุงููุซููุฉ' : 'ูุซููุฉ ุฌุฏูุฏุฉ' }}</h3>
      <form (ngSubmit)="saveDocument()">
        <div class="form-group">
          <label>ุงูุนููุงู <span class="required">*</span></label>
          <input type="text" [(ngModel)]="formModel.titre" name="titre" required minlength="2" placeholder="ุนููุงู ุงููุซููุฉ">
          <span *ngIf="formErrors['titre']" class="error-msg">{{ formErrors['titre'] }}</span>
        </div>
        <div class="form-group">
          <label>ุงูููุน <span class="required">*</span></label>
          <select [(ngModel)]="formModel.type" name="type" required>
            <option value="">ุงุฎุชุฑ ุงูููุน</option>
            <option *ngFor="let opt of typeOptions" [value]="opt">{{ opt }}</option>
          </select>
          <span *ngIf="formErrors['type']" class="error-msg">{{ formErrors['type'] }}</span>
        </div>
        <div class="form-group">
          <label>ุงููุตู</label>
          <textarea [(ngModel)]="formModel.description" name="description" rows="3" placeholder="ูุตู ุงููุซููุฉ"></textarea>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" (click)="closeForm()">ุฅูุบุงุก</button>
          <button type="submit" class="btn-primary">ุญูุธ</button>
        </div>
      </form>
    </div>
  </div>
</div>
